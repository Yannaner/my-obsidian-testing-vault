/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var M=Object.create;var G=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var Y=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var K=(u,t)=>{for(var e in t)G(u,e,{get:t[e],enumerable:!0})},W=(u,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of q(t))!J.call(u,s)&&s!==e&&G(u,s,{get:()=>t[s],enumerable:!(i=_(t,s))||i.enumerable});return u};var V=(u,t,e)=>(e=u!=null?M(Y(u)):{},W(t||!u||!u.__esModule?G(e,"default",{value:u,enumerable:!0}):e,u)),Q=u=>W(G({},"__esModule",{value:!0}),u);var Z={};K(Z,{default:()=>F});module.exports=Q(Z);var c=require("obsidian");var b=require("obsidian"),L={githubRepoUrl:"",deployedUrl:"",enableGitPublish:!0,autoSyncOnSave:!1},D=class extends b.PluginSettingTab{constructor(t,e){super(t,e),this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"VaultSite Settings"}),new b.Setting(t).setName("GitHub Repository URL").setDesc("The URL of your GitHub repository (e.g., https://github.com/username/repo)").addText(e=>e.setPlaceholder("https://github.com/username/repo").setValue(this.plugin.settings.githubRepoUrl).onChange(async i=>{this.plugin.settings.githubRepoUrl=i,await this.plugin.saveSettings()})),new b.Setting(t).setName("Deployed Website URL").setDesc("The URL where your site is deployed (e.g., https://yoursite.vercel.app)").addText(e=>e.setPlaceholder("https://yoursite.vercel.app").setValue(this.plugin.settings.deployedUrl).onChange(async i=>{this.plugin.settings.deployedUrl=i,await this.plugin.saveSettings()})),this.plugin.settings.deployedUrl&&new b.Setting(t).setName("Open Website").setDesc("Open your deployed website in a browser").addButton(e=>e.setButtonText("Open").setCta().onClick(()=>{window.open(this.plugin.settings.deployedUrl,"_blank")})),new b.Setting(t).setName("Enable Git Publish").setDesc("Allow the Publish command to run git add, commit, and push").addToggle(e=>e.setValue(this.plugin.settings.enableGitPublish).onChange(async i=>{this.plugin.settings.enableGitPublish=i,await this.plugin.saveSettings()})),new b.Setting(t).setName("Auto Sync on Save").setDesc("Automatically sync notes when you save a file (experimental)").addToggle(e=>e.setValue(this.plugin.settings.autoSyncOnSave).onChange(async i=>{this.plugin.settings.autoSyncOnSave=i,await this.plugin.saveSettings()})),t.createEl("h3",{text:"Configuration"}),t.createEl("p",{text:"Edit publish.config.json in your vault root to customize include/exclude paths and other settings.",cls:"setting-item-description"})}};var p=require("obsidian");var C=require("obsidian"),A=require("child_process"),H=require("util"),X=(0,H.promisify)(A.exec),E=class{constructor(t){this.vaultPath=t}async runGitCommand(t){try{return await X(t,{cwd:this.vaultPath,maxBuffer:10485760})}catch(e){throw new Error(`Git command failed: ${e.message}
Stderr: ${e.stderr}`)}}async isGitRepository(){try{return await this.runGitCommand("git rev-parse --git-dir"),!0}catch(t){return!1}}async hasRemote(){try{let{stdout:t}=await this.runGitCommand("git remote");return t.trim().length>0}catch(t){return!1}}async getRemoteUrl(){try{let{stdout:t}=await this.runGitCommand("git remote get-url origin");return t.trim()}catch(t){return null}}async hasUncommittedChanges(){try{let{stdout:t}=await this.runGitCommand("git status --porcelain");return t.trim().length>0}catch(t){return!1}}async getBranchName(){try{let{stdout:t}=await this.runGitCommand("git rev-parse --abbrev-ref HEAD");return t.trim()}catch(t){return"main"}}async init(){await this.runGitCommand("git init")}async add(t="-A"){await this.runGitCommand(`git add ${t}`)}async commit(t){let e=t.replace(/"/g,'\\"');await this.runGitCommand(`git commit -m "${e}"`)}async push(){await this.runGitCommand("git push")}async pushWithUpstream(t="main"){await this.runGitCommand(`git push -u origin ${t}`)}async setRemote(t){await this.hasRemote()?await this.runGitCommand(`git remote set-url origin "${t}"`):await this.runGitCommand(`git remote add origin "${t}"`)}async syncAndPush(t){if(!await this.isGitRepository())throw new Error("Not a git repository. Please initialize git first.");if(!await this.hasRemote())throw new Error("No git remote configured. Please add a remote first.");if(await this.add(),await this.hasUncommittedChanges()){let n=t||`VaultSite publish: ${new Date().toISOString()}`;await this.commit(n),new C.Notice("Changes committed")}else new C.Notice("No changes to commit");try{await this.push(),new C.Notice("Pushed to GitHub successfully!")}catch(n){if(n.message.includes("upstream")){let a=await this.getBranchName();await this.pushWithUpstream(a),new C.Notice("Pushed to GitHub successfully!")}else throw n}}getGitInstructions(){return["git init","git add -A",'git commit -m "Initial commit"']}getRemoteInstructions(t){return[`git remote add origin ${t}`,"git branch -M main","git push -u origin main"]}};var g=require("obsidian"),x=V(require("path"),1),m=class{constructor(t){this.app=t}async copyDirectory(t,e){let i=this.app.vault.adapter;await i.exists(e)||await i.mkdir(e);let s=await i.list(t);for(let n of s.files){let a=x.basename(n),r=(0,g.normalizePath)(x.join(e,a)),o=await i.read(n);await i.write(r,o)}for(let n of s.folders){let a=x.basename(n),r=(0,g.normalizePath)(x.join(e,a));await this.copyDirectory(n,r)}}async deleteDirectory(t){let e=this.app.vault.adapter;if(!await e.exists(t))return;let i=await e.list(t);for(let s of i.files)await e.remove(s);for(let s of i.folders)await this.deleteDirectory(s);await e.rmdir(t,!1)}async ensureDirectory(t){let e=this.app.vault.adapter,i=(0,g.normalizePath)(t);await e.exists(i)||await e.mkdir(i)}async writeFile(t,e){let i=this.app.vault.adapter,s=(0,g.normalizePath)(t),n=x.dirname(s);await this.ensureDirectory(n),await i.write(s,e)}async readFile(t){return await this.app.vault.adapter.read((0,g.normalizePath)(t))}async fileExists(t){return await this.app.vault.adapter.exists((0,g.normalizePath)(t))}async copyFile(t,e){let i=await this.readFile(t);await this.writeFile(e,i)}getVaultPath(){return this.app.vault.adapter.basePath}isPathExcluded(t,e){let i=(0,g.normalizePath)(t);for(let s of e){let n=(0,g.normalizePath)(s);if(i.startsWith(n)||i.includes("/"+n+"/")||i.includes("/"+n))return!0}return!1}isPathIncluded(t,e){if(e.length===0)return!0;let i=(0,g.normalizePath)(t);for(let s of e){let n=(0,g.normalizePath)(s);if(n===""||n==="."||i.startsWith(n))return!0}return!1}};var N=class extends p.Modal{constructor(e,i){super(e);this.repoUrlInput="";this.plugin=i,this.fsUtil=new m(e),this.gitUtil=new E(this.fsUtil.getVaultPath())}async onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"VaultSite Setup Wizard"}),e.createEl("p",{text:"Follow these steps to set up your VaultSite website.",cls:"setting-item-description"}),await this.renderStep1(e),await this.renderStep2(e),await this.renderStep3(e),await this.renderStep4(e),await this.renderStep5(e)}async renderStep1(e){let i=e.createDiv({cls:"setup-wizard-step"});i.createEl("h3",{text:"1. Initialize Website"}),i.createEl("p",{text:"Create the /site directory with the Next.js website template."}),await this.fsUtil.fileExists("site")?i.createEl("p",{text:"\u2713 Website directory already exists at /site",cls:"vaultsite-success"}):new p.Setting(i).setName("Create Website").setDesc("Initialize the /site directory").addButton(n=>n.setButtonText("Create /site Website").setCta().onClick(async()=>{n.setDisabled(!0);try{await this.plugin.initializeWebsite(),this.onOpen()}catch(a){new p.Notice(`Failed to initialize website: ${a.message}`),n.setDisabled(!1)}}))}async renderStep2(e){let i=e.createDiv({cls:"setup-wizard-step"});if(i.createEl("h3",{text:"2. Git Repository"}),i.createEl("p",{text:"Initialize git to track your vault changes."}),await this.gitUtil.isGitRepository())i.createEl("p",{text:"\u2713 Git repository detected",cls:"vaultsite-success"});else{i.createEl("p",{text:"\u26A0 No git repository found.",cls:"vaultsite-warning"}),i.createEl("p",{text:"Click the button below to automatically set up git (no terminal needed):"}),new p.Setting(i).setName("Initialize Git").setDesc("Set up git for your vault with one click").addButton(o=>o.setButtonText("Initialize Git Automatically").setCta().onClick(async()=>{o.setDisabled(!0);try{await this.gitUtil.init(),new p.Notice("Git initialized!"),await this.gitUtil.add(),new p.Notice("Files staged"),await this.gitUtil.commit("Initial commit - VaultSite setup"),new p.Notice("\u2713 Git repository created successfully!"),this.onOpen()}catch(l){new p.Notice(`Git initialization failed: ${l.message}`),console.error(l),o.setDisabled(!1)}}));let n=i.createEl("details");n.createEl("summary",{text:"Advanced: Manual setup (for terminal users)"}),n.createEl("pre").createEl("code").setText(this.gitUtil.getGitInstructions().join(`
`))}}async renderStep3(e){let i=e.createDiv({cls:"setup-wizard-step"});i.createEl("h3",{text:"3. Create GitHub Repository"}),i.createEl("p",{text:"Create a new GitHub repository for your vault."}),new p.Setting(i).setName("Open GitHub").setDesc("Create a new repository on GitHub").addButton(s=>s.setButtonText("Open GitHub: New Repo").onClick(()=>{window.open("https://github.com/new","_blank")})),i.createEl("p",{text:"After creating the repository, paste the URL here:"}),new p.Setting(i).setName("GitHub Repository URL").setDesc("Format: https://github.com/username/repo").addText(s=>s.setPlaceholder("https://github.com/username/repo").setValue(this.plugin.settings.githubRepoUrl).onChange(async n=>{this.repoUrlInput=n,this.plugin.settings.githubRepoUrl=n,await this.plugin.saveSettings(),this.onOpen()})),this.plugin.settings.githubRepoUrl&&i.createEl("p",{text:`\u2713 Repository URL saved: ${this.plugin.settings.githubRepoUrl}`,cls:"vaultsite-success"})}async renderStep4(e){let i=e.createDiv({cls:"setup-wizard-step"});i.createEl("h3",{text:"4. Push to GitHub"}),i.createEl("p",{text:"Push your vault to the GitHub repository."});let s=await this.gitUtil.isGitRepository(),n=await this.gitUtil.hasRemote();if(!s){i.createEl("p",{text:"\u26A0 Complete Step 2 first",cls:"vaultsite-warning"});return}if(this.plugin.settings.enableGitPublish&&this.plugin.settings.githubRepoUrl?new p.Setting(i).setName("Configure Remote & Push").setDesc("Set up git remote and push to GitHub").addButton(a=>a.setButtonText("Push to GitHub").setCta().onClick(async()=>{a.setDisabled(!0);try{await this.gitUtil.setRemote(this.plugin.settings.githubRepoUrl),new p.Notice("Git remote configured");let r=await this.gitUtil.getBranchName();await this.gitUtil.pushWithUpstream(r),new p.Notice("Pushed to GitHub successfully!"),this.onOpen()}catch(r){new p.Notice(`Push failed: ${r.message}`),console.error(r),a.setDisabled(!1)}})):(i.createEl("p",{text:"Run these commands in your terminal:"}),this.plugin.settings.githubRepoUrl?(i.createEl("pre").createEl("code").setText(this.gitUtil.getRemoteInstructions(this.plugin.settings.githubRepoUrl).join(`
`)),new p.Setting(i).setName("Copy Commands").addButton(o=>o.setButtonText("Copy to Clipboard").onClick(()=>{navigator.clipboard.writeText(this.gitUtil.getRemoteInstructions(this.plugin.settings.githubRepoUrl).join(`
`)),new p.Notice("Commands copied to clipboard")}))):i.createEl("p",{text:"\u26A0 Enter GitHub repo URL in Step 3 first",cls:"vaultsite-warning"})),n){let a=await this.gitUtil.getRemoteUrl();i.createEl("p",{text:`\u2713 Remote configured: ${a}`,cls:"vaultsite-success"})}}async renderStep5(e){let i=e.createDiv({cls:"setup-wizard-step"});i.createEl("h3",{text:"5. Deploy to Vercel"}),i.createEl("p",{text:"Connect your GitHub repository to Vercel for hosting."}),new p.Setting(i).setName("Open Vercel").setDesc("Import your GitHub repository to Vercel").addButton(o=>o.setButtonText("Open Vercel: New Project").onClick(()=>{window.open("https://vercel.com/new","_blank")}));let s=i.createEl("div",{cls:"setup-instructions"});s.createEl("p",{text:"In Vercel:"});let n=s.createEl("ol");n.createEl("li",{text:'Select "Import Git Repository"'}),n.createEl("li",{text:"Choose your GitHub repository"}),n.createEl("li",{text:"Set Root Directory to: site"}),n.createEl("li",{text:"Click Deploy"}),i.createEl("p",{text:"After deployment, paste your website URL here:"}),new p.Setting(i).setName("Deployed Website URL").setDesc("Format: https://yoursite.vercel.app").addText(o=>o.setPlaceholder("https://yoursite.vercel.app").setValue(this.plugin.settings.deployedUrl).onChange(async l=>{this.plugin.settings.deployedUrl=l,await this.plugin.saveSettings()})),this.plugin.settings.deployedUrl&&(i.createEl("p",{text:`\u2713 Website URL saved: ${this.plugin.settings.deployedUrl}`,cls:"vaultsite-success"}),new p.Setting(i).setName("Open Website").addButton(o=>o.setButtonText("Open Website").setCta().onClick(()=>{window.open(this.plugin.settings.deployedUrl,"_blank")})));let a=await this.fsUtil.fileExists("site"),r=await this.gitUtil.hasRemote();if(a&&r&&this.plugin.settings.deployedUrl){let o=e.createDiv({cls:"setup-wizard-complete"});o.createEl("h3",{text:"\u{1F389} Setup Complete!"}),o.createEl("p",{text:'You can now use the "VaultSite: Publish (Sync + Push)" command to update your website.'})}}onClose(){let{contentEl:e}=this;e.empty()}};var R={include:[],exclude:[".obsidian","site","private","journal"],siteDir:"site",contentDir:"site/content",assetsDir:"site/public/assets",baseRoute:"/notes",slugStyle:"kebab"};var T="publish.config.json",k=class{constructor(t){this.app=t;this.fsUtil=new m(t)}async loadConfig(){try{if(!await this.fsUtil.fileExists(T))return R;let e=await this.fsUtil.readFile(T),i=JSON.parse(e);return{...R,...i}}catch(t){return console.error("Failed to load publish config:",t),R}}async saveConfig(t){let e=JSON.stringify(t,null,2);await this.fsUtil.writeFile(T,e)}async ensureConfigExists(){await this.fsUtil.fileExists(T)||await this.saveConfig(R)}};var v=require("obsidian");var $=class{constructor(t,e){this.config=t;this.allNotePaths=e;this.noteIndex={};this.buildNoteIndex()}buildNoteIndex(){for(let t of this.allNotePaths){let e=t.replace(/\.md$/,""),i=e.split("/"),s=i[i.length-1];s&&(this.noteIndex[s]||(this.noteIndex[s]=[]),this.noteIndex[s].push(e))}}toSlug(t){return this.config.slugStyle==="kebab"?t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):t}resolveWikilink(t){if(t.includes("/")){let s=t.replace(/\.md$/,"");if(s in this.noteIndex||this.allNotePaths.includes(s))return s;let n=s.replace(/\.md$/,"");for(let a of this.allNotePaths)if(a.replace(/\.md$/,"")===n)return n}let e=t.replace(/\.md$/,""),i=this.noteIndex[e];return!i||i.length===0?(console.warn(`Link resolution failed: "${t}" - note not found`),null):(i.length>1&&console.warn(`Link resolution ambiguous: "${t}" matches multiple notes:`,i),i[0]||null)}rewriteLinks(t){let e=t,i=/\[\[([^\]|]+)(\|([^\]]+))?\]\]/g;e=e.replace(i,(n,a,r,o)=>{let l=a.trim(),P=this.resolveWikilink(l);if(!P)return o||l;let f=`${this.config.baseRoute}/${P}`;return`[${o?o.trim():l}](${f})`});let s=/!\[\[([^\]]+)\]\]/g;return e=e.replace(s,(n,a)=>{let r=a.trim();if(/\.(png|jpg|jpeg|gif|svg|webp)$/i.test(r)){let l=r.split("/").pop();return`![${l}](/assets/${l})`}let o=this.resolveWikilink(r);if(o){let l=`${this.config.baseRoute}/${o}`;return`[${r}](${l})`}return n}),e}};var j=V(require("path"),1),z=class{constructor(t,e){this.app=t;this.config=e;this.fsUtil=new m(t)}async syncNotes(){let t=new v.Notice("Syncing notes...",0);try{let e=this.app.vault.getMarkdownFiles();console.log("Vercel Publish: Total markdown files:",e.length),console.log("Vercel Publish: Files:",e.map(o=>o.path)),console.log("Vercel Publish: Config:",this.config);let i=e.filter(o=>{let l=this.shouldSyncFile(o.path);return console.log(`Vercel Publish: ${o.path} -> ${l?"SYNC":"SKIP"}`),l});if(i.length===0)return t.hide(),new v.Notice("No notes found to sync."),new v.Notice("Notes outside the site folder will be synced. Check your exclude settings in publish.config.json if needed."),console.error("Vercel Publish: No files matched include/exclude filters"),{synced:0,skipped:e.length};let s=i.filter(o=>!o.path.startsWith("site/"));s.length>0&&console.log(`Vercel Publish: Found ${s.length} notes outside site folder:`,s.map(o=>o.path)),await this.clearContentDirectory();let n=i.map(o=>o.path),a=new $(this.config,n),r=0;for(let o of i)await this.syncFile(o,a),r++;return t.hide(),new v.Notice(`\u2713 Synced ${r} notes to ${this.config.contentDir}`),{synced:r,skipped:e.length-r}}catch(e){throw t.hide(),console.error("Sync error:",e),new v.Notice(`Sync failed: ${e.message}`),e}}shouldSyncFile(t){if(this.fsUtil.isPathExcluded(t,this.config.exclude))return console.log(`Vercel Publish: ${t} excluded`),!1;if(this.config.include.length>0){let i=this.fsUtil.isPathIncluded(t,this.config.include);return console.log(`Vercel Publish: ${t} include check: ${i}`),i}return console.log(`Vercel Publish: ${t} included (no include filter)`),!0}async clearContentDirectory(){await this.fsUtil.fileExists(this.config.contentDir)&&await this.fsUtil.deleteDirectory(this.config.contentDir),await this.fsUtil.ensureDirectory(this.config.contentDir)}async syncFile(t,e){let i=await this.app.vault.read(t),s=e.rewriteLinks(i),n=j.join(this.config.contentDir,t.path);await this.fsUtil.writeFile(n,s)}async copyAssets(){new v.Notice("Asset copying not yet implemented")}};var h=V(require("path"),1),F=class extends c.Plugin{async onload(){await this.loadSettings(),this.fsUtil=new m(this.app),this.gitUtil=new E(this.fsUtil.getVaultPath()),this.configManager=new k(this.app),this.addCommand({id:"vercel-publish-setup-wizard",name:"Setup Wizard",callback:()=>{new N(this.app,this).open()}}),this.addCommand({id:"vercel-publish-initialize-website",name:"Initialize Website",callback:async()=>{await this.initializeWebsite()}}),this.addCommand({id:"vercel-publish-sync-notes",name:"Sync Notes",callback:async()=>{await this.syncNotes()}}),this.addCommand({id:"vercel-publish-publish",name:"Publish (Sync + Push)",callback:async()=>{await this.publish()}}),this.addCommand({id:"vercel-publish-update-template",name:"Update Template",callback:async()=>{await this.updateTemplate()}}),this.addSettingTab(new D(this.app,this)),console.log("Vercel Publish plugin loaded")}onunload(){console.log("Vercel Publish plugin unloaded")}async loadSettings(){this.settings=Object.assign({},L,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async initializeWebsite(){let t=new c.Notice("Initializing website...",0);try{if(await this.fsUtil.fileExists("site")){t.hide(),new c.Notice("Website directory already exists at /site");return}let s=this.app.vault.adapter.basePath,n=this.manifest.dir||".",a=h.join(s,n,"template-next"),r=h.join(s,"site"),o=require("fs"),l=require("fs").promises;if(!o.existsSync(a))throw new Error(`Template directory not found at: ${a}
Please reinstall the plugin.`);console.log("Copying template from:",a),console.log("To:",r);async function P(f,d){if((await l.stat(f)).isDirectory()){await l.mkdir(d,{recursive:!0});let S=await l.readdir(f);for(let U of S){if(U==="node_modules"||U===".next"||U==="out")continue;let I=h.join(f,U),w=h.join(d,U);await P(I,w)}}else await l.copyFile(f,d),console.log("Copied:",h.basename(d))}await P(a,r),await this.configManager.ensureConfigExists(),t.hide(),new c.Notice("\u2713 Website initialized at /site"),new c.Notice('Run "Vercel Publish: Sync Notes" to add your notes'),console.log("Website initialization complete")}catch(e){t.hide(),console.error("Initialize website error:",e),new c.Notice(`Failed to initialize website: ${e.message}`)}}async syncNotes(){try{if(!await this.fsUtil.fileExists("site")){new c.Notice('Website not initialized. Run "Initialize Website" first.');return}let e=await this.configManager.loadConfig();await new z(this.app,e).syncNotes()}catch(t){console.error("Sync error:",t),new c.Notice(`Sync failed: ${t.message}`)}}async publish(){let t=new c.Notice("Publishing...",0);try{if(!await this.fsUtil.fileExists("site")){t.hide(),new c.Notice('Website not initialized. Run "Initialize Website" first.');return}if(await this.syncNotes(),!this.settings.enableGitPublish){t.hide(),new c.Notice("Sync complete. Enable Git Publish in settings to push to GitHub.");return}if(!await this.gitUtil.isGitRepository()){t.hide(),new c.Notice("Not a git repository. Run the Setup Wizard to configure git.");return}if(!await this.gitUtil.hasRemote()){t.hide(),new c.Notice("No git remote configured. Run the Setup Wizard to add a remote.");return}t.setMessage("Pushing to GitHub..."),await this.gitUtil.syncAndPush(),t.hide(),new c.Notice("\u2713 Published! Vercel will deploy automatically."),this.settings.deployedUrl&&new c.Notice("Your site will be updated at: "+this.settings.deployedUrl)}catch(e){t.hide(),console.error("Publish error:",e),new c.Notice(`Publish failed: ${e.message}`)}}async updateTemplate(){let t=new c.Notice("Updating template...",0);try{if(!await this.fsUtil.fileExists("site")){t.hide(),new c.Notice('Website not initialized. Run "Initialize Website" first.');return}let s=this.app.vault.adapter.basePath,n=this.manifest.dir||".",a=h.join(s,n,"template-next"),r=h.join(s,"site"),o=require("fs"),l=require("fs").promises;if(!o.existsSync(a))throw new Error(`Template directory not found at: ${a}
Please reinstall the plugin.`);console.log("Updating template from:",a),console.log("To:",r);let P=["app","components","lib","public","next.config.mjs","tsconfig.json","package.json",".eslintrc.json"];async function f(d,y,S=!1){if((await l.stat(d)).isDirectory()){if(S&&h.basename(d)==="content"){console.log("Skipping content directory (preserving user notes)");return}await l.mkdir(y,{recursive:!0});let I=await l.readdir(d);for(let w of I){if(w==="node_modules"||w===".next"||w==="out"||w==="content")continue;let O=h.join(d,w),B=h.join(y,w);await f(O,B,S)}}else await l.copyFile(d,y),console.log("Updated:",h.basename(y))}for(let d of P){let y=h.join(a,d),S=h.join(r,d);o.existsSync(y)&&await f(y,S,!0)}t.hide(),new c.Notice("\u2713 Template updated successfully!"),new c.Notice("Your content and customizations have been preserved."),console.log("Template update complete")}catch(e){t.hide(),console.error("Update template error:",e),new c.Notice(`Failed to update template: ${e.message}`)}}};
